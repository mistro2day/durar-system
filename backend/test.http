### 🧩 تسجيل مستخدم جديد
POST http://localhost:8080/api/auth/register
Content-Type: application/json

{
  "name": "مدير درر",
  "email": "admin@durar.local",
  "password": "Admin@123",
  "role": "ADMIN"
}

###

### 🔐 تسجيل الدخول
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "admin@durar.local",
  "password": "Admin@123"
}

###

### 🏢 عرض الوحدات
GET http://localhost:8080/api/units
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### 📑 إنشاء عقد جديد
POST http://localhost:8080/api/contracts
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

{
  "unitId": 1,
  "tenantName": "محمد حيدر",
  "rentalType": "شهري",
  "startDate": "2025-10-01",
  "endDate": "2026-09-30",
  "amount": 2500,
  "rentAmount": 2500
}

###

### 🧾 عرض جميع العقود
GET http://localhost:8080/api/contracts
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### 🔍 عرض عقد محدد
GET http://localhost:8080/api/contracts/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### 🔄 تحديث حالة العقد
PATCH http://localhost:8080/api/contracts/1/status
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

{
  "status": "COMPLETED"
}

###

### ❌ حذف عقد
DELETE http://localhost:8080/api/contracts/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

### ✏️ تعديل عقد
PUT http://localhost:8080/api/contracts/3
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

{
  "amount": 2200,
  "rentalType": "شهري",
  "status": "ACTIVE"
}
### 🗑️ حذف عقد
DELETE http://localhost:8080/api/contracts/3
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

### 🏁 إنهاء عقد
PATCH http://localhost:8080/api/contracts/2/end
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E
### 🏁 إنهاء عقد + تحرير الوحدة وإنشاء فاتورة خروج
PATCH http://localhost:8080/api/contracts/2/end
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E
### 🏁 إنهاء عقد + خصم التأمين
PATCH http://localhost:8080/api/contracts/2/end
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
### 🧾 إنهاء عقد مع استرداد التأمين
PATCH http://localhost:8080/api/contracts/2/end
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

{
  "refundDeposit": true
}
### 🧾 إنهاء عقد وتسجيل النشاط في السجل
PATCH http://localhost:8080/api/contracts/2/end
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

{
  "refundDeposit": true
}


### 💵 عرض الفواتير
GET http://localhost:8080/api/invoices
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### 🛠️ إنشاء بلاغ صيانة جديد
POST http://localhost:8080/api/maintenance
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

{
  "unitId": 1,
  "title": "تسرب مياه في الحمام",
  "description": "يوجد تسرب بسيط من الصنبور الرئيسي يحتاج صيانة عاجلة",
  "priority": "HIGH"
}

###

### 👀 عرض جميع بلاغات الصيانة
GET http://localhost:8080/api/maintenance
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### ✏️ تحديث حالة بلاغ صيانة
PATCH http://localhost:8080/api/maintenance/1
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

{
  "status": "COMPLETED"
}

###

### ❌ حذف بلاغ صيانة
DELETE http://localhost:8080/api/maintenance/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### 🏬 عرض المحلات التجارية
GET http://localhost:8080/api/shops
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###

### 🆕 إضافة محل جديد
POST http://localhost:8080/api/shops
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

{
  "name": "Shop-11",
  "propertyId": 4,
  "status": "AVAILABLE",
  "type": "YEARLY"
}

###

### 🗑️ حذف محل
DELETE http://localhost:8080/api/shops/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E

###### ✏️ تعديل بيانات محل  
PUT http://localhost:8080/api/shops/2  
Content-Type: application/json  
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E  

{
  "name": "محل العصائر الطازجة",
  "location": "الطابق الأرضي - الزاوية اليمنى",
  "phone": "0555555555"
}
// 🏁 إنهاء عقد
export const endContract = async (req: Request, res: Response) => {
  try {
    const { id } = req.params;

    const contract = await prisma.contract.findUnique({
      where: { id: Number(id) },
    });

    if (!contract) {
      return res.status(404).json({ message: "❌ العقد غير موجود" });
    }

    // تحديث الحالة إلى ENDED
    const updated = await prisma.contract.update({
      where: { id: Number(id) },
      data: { status: "ENDED" },
    });

    res.json({
      message: "✅ تم إنهاء العقد بنجاح",
      contract: updated,
    });
  } catch (error: any) {
    res.status(500).json({ message: error.message });
  }
};
### 📊 عرض لوحة التحكم
GET http://localhost:8080/api/dashboard
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6IkFETUlOIiwibmFtZSI6ItmF2K_ZitixINiv2LHYsSIsImVtYWlsIjoiYWRtaW5AZHVyYXIubG9jYWwiLCJpYXQiOjE3NjA0MDM1NzcsImV4cCI6MTc2MTAwODM3N30.jatK4ryGKvPLe4y1Zg2Z7q-XVQ1xXBxh7JjaM2gn83E  
